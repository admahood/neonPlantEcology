theme_linedraw() +
theme(panel.background = element_rect(fill=NA, color="black"));caterpillar
caterpillar <-
all %>%
group_by(site) %>%
summarise(max_nspp_exotic = max(nspp_exotic),
min_nspp_exotic = min(nspp_exotic),
max_nspp_unknown = max(nspp_unknown),
min_nspp_unknown = min(nspp_unknown),
max_rel_cover_exotic = max(rel_cover_exotic),
min_rel_cover_exotic = min(rel_cover_exotic)) %>%
ungroup() %>%
pivot_longer(cols = names(.)[2:ncol(.)]) %>%
mutate(stat = str_sub(name, 1,3),
property = str_remove_all(name, c("max_", "min_"))) %>%
dplyr::select(-name) %>%
pivot_wider(names_from = c(stat), values_from = value) %>%
ggplot(aes(y = site)) +
geom_segment(aes(x = min, xend=max, yend = site)) +
facet_grid(~property, scales = "free") +
theme_minimal() +
theme(panel.background = element_rect(fill=NA, color="black"));caterpillar
caterpillar <-
all %>%
group_by(site) %>%
summarise(max_nspp_exotic = max(nspp_exotic),
min_nspp_exotic = min(nspp_exotic),
max_nspp_unknown = max(nspp_unknown),
min_nspp_unknown = min(nspp_unknown),
max_rel_cover_exotic = max(rel_cover_exotic),
min_rel_cover_exotic = min(rel_cover_exotic)) %>%
ungroup() %>%
pivot_longer(cols = names(.)[2:ncol(.)]) %>%
mutate(stat = str_sub(name, 1,3),
property = str_remove_all(name, c("max_", "min_"))) %>%
dplyr::select(-name) %>%
pivot_wider(names_from = c(stat), values_from = value) %>%
ggplot(aes(y = site)) +
geom_segment(aes(x = min, xend=max, yend = site)) +
facet_grid(~property, scales = "free") +
theme_classic() +
theme(panel.background = element_rect(fill=NA, color="black"),
panel.grid.minor.y = element_line(color = "grey", lty = 3));caterpillar
caterpillar <-
all %>%
group_by(site) %>%
summarise(max_nspp_exotic = max(nspp_exotic),
min_nspp_exotic = min(nspp_exotic),
max_nspp_unknown = max(nspp_unknown),
min_nspp_unknown = min(nspp_unknown),
max_rel_cover_exotic = max(rel_cover_exotic),
min_rel_cover_exotic = min(rel_cover_exotic)) %>%
ungroup() %>%
pivot_longer(cols = names(.)[2:ncol(.)]) %>%
mutate(stat = str_sub(name, 1,3),
property = str_remove_all(name, c("max_", "min_"))) %>%
dplyr::select(-name) %>%
pivot_wider(names_from = c(stat), values_from = value) %>%
ggplot(aes(y = site)) +
geom_segment(aes(x = min, xend=max, yend = site)) +
facet_grid(~property, scales = "free") +
theme_classic() +
theme(panel.background = element_rect(fill=NA, color="black"),
panel.grid.minor.y = element_line(color = "grey", linetype = 3));caterpillar
caterpillar <-
all %>%
group_by(site) %>%
summarise(max_nspp_exotic = max(nspp_exotic),
min_nspp_exotic = min(nspp_exotic),
max_nspp_unknown = max(nspp_unknown),
min_nspp_unknown = min(nspp_unknown),
max_rel_cover_exotic = max(rel_cover_exotic),
min_rel_cover_exotic = min(rel_cover_exotic)) %>%
ungroup() %>%
pivot_longer(cols = names(.)[2:ncol(.)]) %>%
mutate(stat = str_sub(name, 1,3),
property = str_remove_all(name, c("max_", "min_"))) %>%
dplyr::select(-name) %>%
pivot_wider(names_from = c(stat), values_from = value) %>%
ggplot(aes(y = site)) +
geom_segment(aes(x = min, xend=max, yend = site)) +
facet_grid(~property, scales = "free") +
theme_classic() +
theme(panel.background = element_rect(fill=NA, color="black"),
panel.grid.minor.y = element_line(color = "grey", linetype = 2));caterpillar
?element_line()
caterpillar <-
all %>%
group_by(site) %>%
summarise(max_nspp_exotic = max(nspp_exotic),
min_nspp_exotic = min(nspp_exotic),
max_nspp_unknown = max(nspp_unknown),
min_nspp_unknown = min(nspp_unknown),
max_rel_cover_exotic = max(rel_cover_exotic),
min_rel_cover_exotic = min(rel_cover_exotic)) %>%
ungroup() %>%
pivot_longer(cols = names(.)[2:ncol(.)]) %>%
mutate(stat = str_sub(name, 1,3),
property = str_remove_all(name, c("max_", "min_"))) %>%
dplyr::select(-name) %>%
pivot_wider(names_from = c(stat), values_from = value) %>%
ggplot(aes(y = site)) +
geom_segment(aes(x = min, xend=max, yend = site)) +
facet_grid(~property, scales = "free") +
theme_classic() +
theme(panel.background = element_rect(fill=NA, color="black"),
panel.grid.major.x = element_line(color = "grey", linetype = 2));caterpillar
caterpillar <-
all %>%
group_by(site) %>%
summarise(max_nspp_exotic = max(nspp_exotic),
min_nspp_exotic = min(nspp_exotic),
max_nspp_unknown = max(nspp_unknown),
min_nspp_unknown = min(nspp_unknown),
max_rel_cover_exotic = max(rel_cover_exotic),
min_rel_cover_exotic = min(rel_cover_exotic)) %>%
ungroup() %>%
pivot_longer(cols = names(.)[2:ncol(.)]) %>%
mutate(stat = str_sub(name, 1,3),
property = str_remove_all(name, c("max_", "min_"))) %>%
dplyr::select(-name) %>%
pivot_wider(names_from = c(stat), values_from = value) %>%
ggplot(aes(y = site)) +
geom_segment(aes(x = min, xend=max, yend = site)) +
facet_grid(~property, scales = "free") +
theme_classic() +
theme(panel.background = element_rect(fill=NA, color="black"),
panel.grid.major.y = element_line(color = "grey", linetype = 2));caterpillar
?redorder
reorder
?reorder
caterpillar <-
all %>%
group_by(site) %>%
summarise(max_nspp_exotic = max(nspp_exotic),
min_nspp_exotic = min(nspp_exotic),
max_nspp_unknown = max(nspp_unknown),
min_nspp_unknown = min(nspp_unknown),
max_rel_cover_exotic = max(rel_cover_exotic),
min_rel_cover_exotic = min(rel_cover_exotic)) %>%
ungroup() %>%
pivot_longer(cols = names(.)[2:ncol(.)]) %>%
mutate(stat = str_sub(name, 1,3),
property = str_remove_all(name, c("max_", "min_"))) %>%
dplyr::select(-name) %>%
pivot_wider(names_from = c(stat), values_from = value) %>%
ggplot(aes(y = reorder(site, value))) +
geom_segment(aes(x = min, xend=max, yend = site)) +
facet_grid(~property, scales = "free") +
theme_classic() +
theme(panel.background = element_rect(fill=NA, color="black"),
panel.grid.major.y = element_line(color = "grey", linetype = 2));caterpillar
caterpillar <-
all %>%
group_by(site) %>%
summarise(max_nspp_exotic = max(nspp_exotic),
min_nspp_exotic = min(nspp_exotic),
max_nspp_unknown = max(nspp_unknown),
min_nspp_unknown = min(nspp_unknown),
max_rel_cover_exotic = max(rel_cover_exotic),
min_rel_cover_exotic = min(rel_cover_exotic)) %>%
ungroup() %>%
pivot_longer(cols = names(.)[2:ncol(.)]) %>%
mutate(stat = str_sub(name, 1,3),
property = str_remove_all(name, c("max_", "min_"))) %>%
dplyr::select(-name) %>%
pivot_wider(names_from = c(stat), values_from = value) %>%
ggplot(aes(y = reorder(site, min))) +
geom_segment(aes(x = min, xend=max, yend = site)) +
facet_grid(~property, scales = "free") +
theme_classic() +
theme(panel.background = element_rect(fill=NA, color="black"),
panel.grid.major.y = element_line(color = "grey", linetype = 2));caterpillar
caterpillar_data <-
all %>%
group_by(site) %>%
summarise(max_nspp_exotic = max(nspp_exotic),
min_nspp_exotic = min(nspp_exotic),
max_nspp_unknown = max(nspp_unknown),
min_nspp_unknown = min(nspp_unknown),
max_rel_cover_exotic = max(rel_cover_exotic),
min_rel_cover_exotic = min(rel_cover_exotic)) %>%
ungroup() %>%
pivot_longer(cols = names(.)[2:ncol(.)]) %>%
mutate(stat = str_sub(name, 1,3),
property = str_remove_all(name, c("max_", "min_"))) %>%
dplyr::select(-name) %>%
pivot_wider(names_from = c(stat), values_from = value)
caterpillar_data <-
all %>%
group_by(site) %>%
summarise(max_nspp_exotic = max(nspp_exotic),
min_nspp_exotic = min(nspp_exotic),
max_nspp_unknown = max(nspp_unknown),
min_nspp_unknown = min(nspp_unknown),
max_rel_cover_exotic = max(rel_cover_exotic),
min_rel_cover_exotic = min(rel_cover_exotic)) %>%
ungroup() %>%
pivot_longer(cols = names(.)[2:ncol(.)]) %>%
mutate(stat = str_sub(name, 1,3),
property = str_remove_all(name, c("max_", "min_"))) %>%
dplyr::select(-name) %>%
pivot_wider(names_from = c(stat), values_from = value)
caterpillar <- ggplot(caterpillar_data, aes(y = reorder(site, min))) +
geom_segment(aes(x = min, xend=max, yend = site)) +
facet_grid(~property, scales = "free") +
theme_classic() +
theme(panel.background = element_rect(fill=NA, color="black"),
panel.grid.major.y = element_line(color = "grey", linetype = 2));caterpillar
caterpillar_data
caterpillar_data <-
all %>%
group_by(site) %>%
summarise(max_nspp_exotic = max(nspp_exotic),
min_nspp_exotic = min(nspp_exotic),
max_nspp_unknown = max(nspp_unknown),
min_nspp_unknown = min(nspp_unknown),
max_rel_cover_exotic = max(rel_cover_exotic),
min_rel_cover_exotic = min(rel_cover_exotic)) %>%
ungroup() %>%
pivot_longer(cols = names(.)[2:ncol(.)]) %>%
mutate(stat = str_sub(name, 1,3),
property = str_remove_all(name, c("max_", "min_"))) %>%
dplyr::select(-name) %>%
pivot_wider(names_from = c(stat), values_from = value) %>%
group_by(site) %>%
mutate(max_rce = filter(property == "rel_cover_exotic") %>% pull(max)) %>%
ungroup()
caterpillar_data %>%
group_by(site) %>%
filter(property == "rel_cover_exotic") %>%
pull(max)
caterpillar_data %>%
group_by(site) %>%
filter(property == "rel_cover_exotic") %>%
ungroup
caterpillar_data %>%
group_by(site) %>%
filter(property == "rel_cover_exotic") %>%
dplyr::select(site, max)
order_d<-caterpillar_data %>%
group_by(site) %>%
filter(property == "rel_cover_exotic") %>%
dplyr::select(site, max)
order_d
caterpillar_data <-
all %>%
group_by(site) %>%
summarise(max_nspp_exotic = max(nspp_exotic),
min_nspp_exotic = min(nspp_exotic),
max_nspp_unknown = max(nspp_unknown),
min_nspp_unknown = min(nspp_unknown),
max_rel_cover_exotic = max(rel_cover_exotic),
min_rel_cover_exotic = min(rel_cover_exotic),
max_rel_cover_unknown = max(rel_cover_unknown),
min_rel_cover_unknown = min(rel_cover_unknown)) %>%
ungroup() %>%
pivot_longer(cols = names(.)[2:ncol(.)]) %>%
mutate(stat = str_sub(name, 1,3),
property = str_remove_all(name, c("max_", "min_"))) %>%
dplyr::select(-name) %>%
pivot_wider(names_from = c(stat), values_from = value)
order_d<-caterpillar_data %>%
group_by(site) %>%
filter(property == "rel_cover_exotic") %>%
dplyr::select(site, orderval=max)
caterpillar <-
caterpillar_data %>%
left_join(order_d) %>%
ggplot(aes(y = reorder(site, orderval))) +
geom_segment(aes(x = min, xend=max, yend = site)) +
facet_grid(~property, scales = "free") +
theme_classic() +
theme(panel.background = element_rect(fill=NA, color="black"),
panel.grid.major.y = element_line(color = "grey", linetype = 2));caterpillar
caterpillar_data
dir.create("figs")
ggsave(caterpillar, "figs/caterpillar_plot.png")
ggsave(caterpillar, filename = "figs/caterpillar_plot.png", height=10,width = 15)
ggsave(caterpillar, filename = "figs/caterpillar_plot.png", height=7,width = 10)
caterpillar <-
caterpillar_data %>%
left_join(order_d) %>%
ggplot(aes(y = reorder(site, orderval))) +
geom_segment(aes(x = min, xend=max, yend = site)) +
facet_grid(~property, scales = "free") +
theme_classic() +
theme(panel.background = element_rect(fill=NA, color="black"),
panel.grid.major.y = element_line(color = "grey", linetype = 2)) +
ggtitle("All Terrestrial Sites");caterpillar
ggsave(caterpillar, filename = "figs/caterpillar_plot.png", height=7,width = 10)
caterpillar <-
caterpillar_data %>%
left_join(order_d) %>%
ggplot(aes(y = reorder(site, orderval))) +
geom_segment(aes(x = min, xend=max, yend = site)) +
facet_grid(~property, scales = "free") +
theme_classic() +
theme(panel.background = element_rect(fill=NA, color="black"),
axis.title = element_blank(),
panel.grid.major.y = element_line(color = "grey", linetype = 2)) +
ggtitle("All Terrestrial Sites");caterpillar
dir.create("figs")
ggsave(caterpillar, filename = "figs/caterpillar_plot.png", height=7,width = 10)
caterpillar <-
caterpillar_data %>%
left_join(order_d) %>%
ggplot(aes(y = reorder(site, orderval))) +
geom_segment(aes(x = min, xend=max, yend = site), lwd =2) +
facet_grid(~property, scales = "free") +
theme_classic() +
theme(panel.background = element_rect(fill=NA, color="black"),
axis.title.y = element_blank(),
panel.grid.major.y = element_line(color = "grey", linetype = 2)) +
xlab("Range of Values") +
ggtitle("All Terrestrial Sites");caterpillar
dir.create("figs")
ggsave(caterpillar, filename = "figs/caterpillar_plot.png", height=7,width = 10)
caterpillar <-
caterpillar_data %>%
left_join(order_d) %>%
ggplot(aes(y = reorder(site, orderval))) +
geom_segment(aes(x = min, xend=max, yend = site), lwd =1) +
facet_grid(~property, scales = "free") +
theme_classic() +
theme(panel.background = element_rect(fill=NA, color="black"),
axis.title.y = element_blank(),
panel.grid.major.y = element_line(color = "grey", linetype = 2)) +
xlab("Range of Values") +
ggtitle("All Terrestrial Sites");caterpillar
# dir.create("figs")
ggsave(caterpillar, filename = "figs/caterpillar_plot.png", height=7,width = 10)
all %>%
group_by(site)
caterpillar_data <-
all %>%
group_by(site) %>%
summarise(min_year = min(year),
max_year = max(year),
max_nspp_exotic = max(nspp_exotic),
min_nspp_exotic = min(nspp_exotic),
max_nspp_unknown = max(nspp_unknown),
min_nspp_unknown = min(nspp_unknown),
max_rel_cover_exotic = max(rel_cover_exotic),
min_rel_cover_exotic = min(rel_cover_exotic),
max_rel_cover_unknown = max(rel_cover_unknown),
min_rel_cover_unknown = min(rel_cover_unknown)) %>%
ungroup() %>%
pivot_longer(cols = names(.)[2:ncol(.)]) %>%
mutate(stat = str_sub(name, 1,3),
property = str_remove_all(name, c("max_", "min_"))) %>%
dplyr::select(-name) %>%
pivot_wider(names_from = c(stat), values_from = value)
all %>%
group_by(site) %>%
summarise(min_year = min(year),
max_year = max(year),
max_nspp_exotic = max(nspp_exotic),
min_nspp_exotic = min(nspp_exotic),
max_nspp_unknown = max(nspp_unknown),
min_nspp_unknown = min(nspp_unknown),
max_rel_cover_exotic = max(rel_cover_exotic),
min_rel_cover_exotic = min(rel_cover_exotic),
max_rel_cover_unknown = max(rel_cover_unknown),
min_rel_cover_unknown = min(rel_cover_unknown)) %>%
ungroup() %>%
pivot_longer(cols = names(.)[2:ncol(.)])
caterpillar_data <-
all %>%
group_by(site) %>%
mutate(year = as.numeric(year)) %>%
summarise(min_year = min(year),
max_year = max(year),
max_nspp_exotic = max(nspp_exotic),
min_nspp_exotic = min(nspp_exotic),
max_nspp_unknown = max(nspp_unknown),
min_nspp_unknown = min(nspp_unknown),
max_rel_cover_exotic = max(rel_cover_exotic),
min_rel_cover_exotic = min(rel_cover_exotic),
max_rel_cover_unknown = max(rel_cover_unknown),
min_rel_cover_unknown = min(rel_cover_unknown)) %>%
ungroup() %>%
pivot_longer(cols = names(.)[2:ncol(.)]) %>%
mutate(stat = str_sub(name, 1,3),
property = str_remove_all(name, c("max_", "min_"))) %>%
dplyr::select(-name) %>%
pivot_wider(names_from = c(stat), values_from = value)
order_d<-caterpillar_data %>%
group_by(site) %>%
filter(property == "rel_cover_exotic") %>%
dplyr::select(site, orderval=max)
caterpillar <-
caterpillar_data %>%
left_join(order_d) %>%
ggplot(aes(y = reorder(site, orderval))) +
geom_segment(aes(x = min, xend=max, yend = site), lwd =1) +
facet_grid(~property, scales = "free") +
theme_classic() +
theme(panel.background = element_rect(fill=NA, color="black"),
axis.title.y = element_blank(),
panel.grid.major.y = element_line(color = "grey", linetype = 2)) +
xlab("Range of Values") +
ggtitle("All Terrestrial Sites");caterpillar
# dir.create("figs")
ggsave(caterpillar, filename = "figs/caterpillar_plot.png", height=7,width = 10)
caterpillar_data
all %>%
group_by(site) %>%
mutate(year = as.numeric(year)) %>%
summarise(min_year = min(year),
max_year = max(year),
max_nspp_exotic = max(nspp_exotic),
min_nspp_exotic = min(nspp_exotic),
max_nspp_unknown = max(nspp_unknown),
min_nspp_unknown = min(nspp_unknown),
max_rel_cover_exotic = max(rel_cover_exotic),
min_rel_cover_exotic = min(rel_cover_exotic),
max_rel_cover_unknown = max(rel_cover_unknown),
min_rel_cover_unknown = min(rel_cover_unknown)) %>%
ungroup() %>%
pivot_longer(cols = names(.)[2:ncol(.)]) %>%
mutate(stat = str_sub(name, 1,3),
property = str_remove_all(name, c("max_", "min_")))
all %>%
group_by(site) %>%
mutate(year = as.numeric(year)) %>%
summarise(min_year = min(year),
max_year = max(year),
max_nspp_exotic = max(nspp_exotic),
min_nspp_exotic = min(nspp_exotic),
max_nspp_unknown = max(nspp_unknown),
min_nspp_unknown = min(nspp_unknown),
max_rel_cover_exotic = max(rel_cover_exotic),
min_rel_cover_exotic = min(rel_cover_exotic),
max_rel_cover_unknown = max(rel_cover_unknown),
min_rel_cover_unknown = min(rel_cover_unknown)) %>%
ungroup() %>%
pivot_longer(cols = names(.)[2:ncol(.)])
caterpillar_data <-
all %>%
group_by(site) %>%
mutate(year = as.numeric(year)) %>%
summarise(min_year = min(year),
max_year = max(year),
max_nspp_exotic = max(nspp_exotic),
min_nspp_exotic = min(nspp_exotic),
max_nspp_unknown = max(nspp_unknown),
min_nspp_unknown = min(nspp_unknown),
max_rel_cover_exotic = max(rel_cover_exotic),
min_rel_cover_exotic = min(rel_cover_exotic),
max_rel_cover_unknown = max(rel_cover_unknown),
min_rel_cover_unknown = min(rel_cover_unknown)) %>%
ungroup() %>%
pivot_longer(cols = names(.)[2:ncol(.)]) %>%
mutate(stat = str_sub(name, 1,3),
property = str_remove_all(name, c("max_", "min_")),
property = ifelse(property == "min_year", "year", property),
property = ifelse(property == "max_year", "year", property)) %>%
dplyr::select(-name) %>%
pivot_wider(names_from = c(stat), values_from = value)
order_d<-caterpillar_data %>%
group_by(site) %>%
filter(property == "rel_cover_exotic") %>%
dplyr::select(site, orderval=max)
caterpillar <-
caterpillar_data %>%
left_join(order_d) %>%
ggplot(aes(y = reorder(site, orderval))) +
geom_segment(aes(x = min, xend=max, yend = site), lwd =1) +
facet_grid(~property, scales = "free") +
theme_classic() +
theme(panel.background = element_rect(fill=NA, color="black"),
axis.title.y = element_blank(),
panel.grid.major.y = element_line(color = "grey", linetype = 2)) +
xlab("Range of Values") +
ggtitle("All Terrestrial Sites");caterpillar
# dir.create("figs")
ggsave(caterpillar, filename = "figs/caterpillar_plot.png", height=7,width = 10)
caterpillar_data
caterpillar <-
caterpillar_data %>%
filter(property != "year") %>%
left_join(order_d) %>%
ggplot(aes(y = reorder(site, orderval))) +
geom_segment(aes(x = min, xend=max, yend = site), lwd =1) +
facet_grid(~property, scales = "free") +
theme_classic() +
theme(panel.background = element_rect(fill=NA, color="black"),
axis.title.y = element_blank(),
panel.grid.major.y = element_line(color = "grey", linetype = 2)) +
xlab("Range of Values") +
ggtitle("All Terrestrial Sites");caterpillar
# dir.create("figs")
ggsave(caterpillar, filename = "figs/caterpillar_plot.png", height=7,width = 10)
sites
caterpillar <-
caterpillar_data %>%
filter(property != "year") %>%
left_join(order_d) %>%
ggplot(aes(y = reorder(site, orderval))) +
geom_segment(aes(x = min, xend=max, yend = site), lwd =1) +
facet_grid(~property, scales = "free") +
theme_classic() +
theme(panel.background = element_rect(fill=NA, color="black"),
axis.title.y = element_blank(),
panel.grid.major.y = element_line(color = "grey", linetype = 2)) +
xlab("Range of Values") +
ggtitle("NEON Terrestrial Sites");caterpillar
# dir.create("figs")
ggsave(caterpillar, filename = "figs/caterpillar_plot.png", height=7,width = 10)
save(all, "data/all_div_site.Rda")
save(all, file= "data/all_div_site.Rda")
