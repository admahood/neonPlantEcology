dplyr::ungroup()
full_on_cover %>%
dplyr::group_by(site, plotID, subplotID, taxonID, year) %>%
dplyr::summarise(cover = sum(cover)) %>%
dplyr::ungroup() %>%
dplyr::mutate(taxonID = as.character(taxonID),
plotID = as.character(plotID)) %>%
dplyr::filter(nchar(as.character(taxonID))>0) %>%
dplyr::group_by(site, plotID,year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup()
full_on_cover %>%
dplyr::group_by(site, plotID, subplotID, taxonID, year) %>%
dplyr::summarise(cover = sum(cover)) %>%
dplyr::ungroup() %>%
dplyr::mutate(taxonID = as.character(taxonID),
plotID = as.character(plotID)) %>%
dplyr::filter(nchar(as.character(taxonID))>0) %>%
dplyr::group_by(site, plotID,year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup() %>%
dplyr::select() %>%
dplyr::group_by(site, plotID, year) %>%
dplyr::summarise(nestedness = vegan::nestedbetajac(.)[2])
full_on_cover %>%
dplyr::group_by(site, plotID, subplotID, taxonID, year) %>%
dplyr::summarise(cover = sum(cover)) %>%
dplyr::ungroup() %>%
dplyr::mutate(taxonID = as.character(taxonID),
plotID = as.character(plotID)) %>%
dplyr::filter(nchar(as.character(taxonID))>0) %>%
dplyr::group_by(site, plotID,year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup()
betadiv_total <- full_on_cover %>%
dplyr::group_by(site, plotID, subplotID, taxonID, year) %>%
dplyr::summarise(cover = sum(cover)) %>%
dplyr::ungroup() %>%
dplyr::mutate(taxonID = as.character(taxonID),
plotID = as.character(plotID)) %>%
dplyr::filter(nchar(as.character(taxonID))>0) %>%
dplyr::group_by(site, plotID,year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup() %>%
dplyr::select(-subplotID) %>%
dplyr::group_by(site, plotID, year) %>%
dplyr::summarise(nestedness = vegan::nestedbetajac(.)[2])
full_on_cover %>%
dplyr::group_by(site, plotID, subplotID, taxonID, year) %>%
dplyr::summarise(cover = sum(cover)) %>%
dplyr::ungroup() %>%
dplyr::mutate(taxonID = as.character(taxonID),
plotID = as.character(plotID)) %>%
dplyr::filter(nchar(as.character(taxonID))>0) %>%
dplyr::group_by(site, plotID,year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup() %>%
dplyr::select(-subplotID) %>%
dplyr::group_by(site, plotID, year)
betadiv_total <- full_on_cover %>%
dplyr::group_by(site, plotID, subplotID, taxonID, year) %>%
dplyr::summarise(cover = sum(cover)) %>%
dplyr::ungroup() %>%
dplyr::mutate(taxonID = as.character(taxonID),
plotID = as.character(plotID)) %>%
dplyr::filter(nchar(as.character(taxonID))>0) %>%
dplyr::group_by(site, plotID,year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup() %>%
dplyr::select(-subplotID) %>%
dplyr::group_by(site, plotID, year) %>%
dplyr::summarise(nestedness = vegan::nestedbetajac()[2])
betadiv_total <- full_on_cover %>%
dplyr::group_by(site, plotID, subplotID, taxonID, year) %>%
dplyr::summarise(cover = sum(cover)) %>%
dplyr::ungroup() %>%
dplyr::mutate(taxonID = as.character(taxonID),
plotID = as.character(plotID)) %>%
dplyr::filter(nchar(as.character(taxonID))>0) %>%
dplyr::group_by(site, plotID,year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup() %>%
dplyr::select(-subplotID) %>%
dplyr::group_by(site, plotID, year) %>%
dplyr::summarise(nestedness = vegan::nestedbetajac(.)[2])
betadiv_total <- full_on_cover %>%
dplyr::group_by(site, plotID, subplotID, taxonID, year) %>%
dplyr::summarise(cover = sum(cover)) %>%
dplyr::ungroup() %>%
dplyr::mutate(taxonID = as.character(taxonID),
plotID = as.character(plotID)) %>%
dplyr::filter(nchar(as.character(taxonID))>0) %>%
dplyr::group_by(site, plotID,year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup() %>%
dplyr::select(-subplotID) %>%
dplyr::group_by(site, plotID, year) %>%
dplyr::summarise(nestedness = vegan::nestedbetajac(.[3:ncol(.)])[2])
betadiv_total <- full_on_cover %>%
dplyr::group_by(site, plotID, subplotID, taxonID, year) %>%
dplyr::summarise(cover = sum(cover)) %>%
dplyr::ungroup() %>%
dplyr::mutate(taxonID = as.character(taxonID),
plotID = as.character(plotID)) %>%
dplyr::filter(nchar(as.character(taxonID))>0) %>%
dplyr::group_by(site, plotID,year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup() %>%
dplyr::select(-subplotID) %>%
dplyr::group_by(site, plotID, year) %>%
dplyr::summarise(nestedness = vegan::nestedbetajac(.[3:ncol(.)]))
dplyr::select(-site, -plotID, -subplotID, -year))
betadiv_total <- full_on_cover %>%
dplyr::group_by(site, plotID, subplotID, taxonID, year) %>%
dplyr::summarise(cover = sum(cover)) %>%
dplyr::ungroup() %>%
dplyr::mutate(taxonID = as.character(taxonID),
plotID = as.character(plotID)) %>%
dplyr::filter(nchar(as.character(taxonID))>0) %>%
dplyr::group_by(site, plotID,year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup() %>%
dplyr::select(-subplotID) %>%
dplyr::group_by(site, plotID, year) %>%
dplyr::summarise(nestedness = vegan::nestedbetajac(.[3:ncol(.)]))
i="ABBY_001"
j = "2016"
k = "ABBY"
betadiv_total %>%
filter(plotID == i, year == j, site == k) %>%
dplyr::select(-plotID, -site, -year) %>%
nestedbetajac()
betadiv_total <- full_on_cover %>%
dplyr::group_by(site, plotID, subplotID, taxonID, year) %>%
dplyr::summarise(cover = sum(cover)) %>%
dplyr::ungroup() %>%
dplyr::mutate(taxonID = as.character(taxonID),
plotID = as.character(plotID)) %>%
dplyr::filter(nchar(as.character(taxonID))>0) %>%
dplyr::group_by(site, plotID,year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup() %>%
dplyr::select(-subplotID)
betadiv_total %>%
filter(plotID == i, year == j, site == k) %>%
dplyr::select(-plotID, -site, -year) %>%
nestedbetajac()
betadiv_total %>%
filter(plotID == i, year == j, site == k)
year = 2018
betadiv_total %>%
filter(plotID == i, year == j, site == k)
i=2018
betadiv_total %>%
filter(plotID == i, year == j, site == k)
i="2018"
betadiv_total %>%
filter(plotID == i, year == j, site == k)
betadiv_total
betadiv_total[,1:3]
devtools::document()
devtools::install()
devtools::install_github("admahood/neondiveRsity")
neondiveRsity::get_diversity_info()
neondiveRsity::get_diversity_info
library(neondiveRsity)
neon_div_object <- download_plant_div("SRER")
one_m_cover <- get_longform_cover(neon_div_object,
scale = "1m",
fix_unks = fix_unks)
fix_unks = FALSE
one_m_cover <- get_longform_cover(neon_div_object,
scale = "1m",
fix_unks = fix_unks)
one_m_cover
one_m_cover <- get_longform_cover(neon_div_object,
scale = "1m",
fix_unks = fix_unks) %>%
dplyr::group_by(site, plotID, subplotID,taxonID year) %>%
dplyr::summarise(cover = sum(cover, na.rm = TRUE)) %>%
dplyr::ungroup() %>%
dplyr::group_by(site, plotID, subplotID, year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup()
one_m_cover <- get_longform_cover(neon_div_object,
scale = "1m",
fix_unks = fix_unks) %>%
dplyr::group_by(site, plotID, subplotID,taxonID, year) %>%
dplyr::summarise(cover = sum(cover, na.rm = TRUE)) %>%
dplyr::ungroup() %>%
dplyr::group_by(site, plotID, subplotID, year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup()
one_m_cover
one_m_cover <- get_longform_cover(neon_div_object,
scale = "10m",
fix_unks = fix_unks) %>%
dplyr::group_by(site, plotID, subplotID,taxonID, year) %>%
dplyr::summarise(cover = sum(cover, na.rm = TRUE)) %>%
dplyr::ungroup() %>%
dplyr::group_by(site, plotID, subplotID, year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup()
one_m_cover
dplyr::group_by(site, plotID, year) %>%
summarise(beta = nestedbetajac(.)[1])
one_m_cover <- get_longform_cover(neon_div_object,
scale = "10m",
fix_unks = fix_unks) %>%
dplyr::group_by(site, plotID, subplotID,taxonID, year) %>%
dplyr::summarise(cover = sum(cover, na.rm = TRUE)) %>%
dplyr::ungroup() %>%
dplyr::group_by(site, plotID, subplotID, year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup() %>%
dplyr::select(-subplotID)%>%
dplyr::group_by(site, plotID, year) %>%
summarise(beta = nestedbetajac(.)[1])
one_m_cover <- get_longform_cover(neon_div_object,
scale = "10m",
fix_unks = fix_unks) %>%
dplyr::group_by(site, plotID, subplotID,taxonID, year) %>%
dplyr::summarise(cover = sum(cover, na.rm = TRUE)) %>%
dplyr::ungroup() %>%
dplyr::group_by(site, plotID, subplotID, year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup() %>%
dplyr::select(-subplotID)%>%
dplyr::group_by(site, plotID, year) %>%
summarise(beta = nestedbetajac(. %>% dplyr::select(-site, -plotID, -year))[1])
one_m_cover <- get_longform_cover(neon_div_object,
scale = "10m",
fix_unks = fix_unks) %>%
dplyr::group_by(site, plotID, subplotID,taxonID, year) %>%
dplyr::summarise(cover = sum(cover, na.rm = TRUE)) %>%
dplyr::ungroup() %>%
dplyr::group_by(site, plotID, subplotID, year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup() %>%
dplyr::select(-subplotID)%>%
dplyr::group_by(site, plotID, year) %>%
summarise(beta = nestedbetajac(. %>% dplyr::select(-site, -plotID, -year)))
one_m_cover <- get_longform_cover(neon_div_object,
scale = "10m",
fix_unks = fix_unks) %>%
dplyr::group_by(site, plotID, subplotID,taxonID, year) %>%
dplyr::summarise(cover = sum(cover, na.rm = TRUE)) %>%
dplyr::ungroup() %>%
dplyr::group_by(site, plotID, subplotID, year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup() %>%
dplyr::select(-subplotID)
one_m_cover
one_m_cover %>%
dplyr::filter(year == "2016", plotID == "SRER_001", site == "SRER")
one_m_cover %>%
dplyr::filter(year == "2016", plotID == "SRER_001", site == "SRER") %>%
dplyr::select(-year, -site, -plotID) %>%
nestedbetajac()
out <- one_m_cover %>%
dplyr::filter(year == i, plotID == i) %>%
dplyr::select(-year, -site, -plotID) %>%
nestedbetajac()
i="2016"
j = "SRER_001"
out <- one_m_cover %>%
dplyr::filter(year == i, plotID == i) %>%
dplyr::select(-year, -site, -plotID) %>%
nestedbetajac()
one_m_cover %>%
dplyr::filter(year == i, plotID == i) %>%
dplyr::select(-year, -site, -plotID)
i="2018"
one_m_cover %>%
dplyr::filter(year == i, plotID == i) %>%
dplyr::select(-year, -site, -plotID)
one_m_cover
one_m_cover %>%
dplyr::filter(year == i, plotID == j) %>%
dplyr::select(-year, -site, -plotID)
out <- one_m_cover %>%
dplyr::filter(year == i, plotID == j) %>%
dplyr::select(-year, -site, -plotID) %>%
nestedbetajac()
out
out[1]
out[1] %>% unname
bd[counter, 2] <- out[2] %>% unname
bd<- data.frame(turnover = NA, nestedness = NA)
counter <- 1
bd[counter, 1] <- out[1] %>% unname
bd[counter, 2] <- out[2] %>% unname
bd
one_m_cover <- get_longform_cover(neon_div_object,
scale = "10m",
fix_unks = fix_unks) %>%
dplyr::group_by(site, plotID, subplotID,taxonID, year) %>%
dplyr::summarise(cover = sum(cover, na.rm = TRUE)) %>%
dplyr::ungroup() %>%
dplyr::group_by(site, plotID, subplotID, year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup() %>%
dplyr::select(-subplotID)
bd<- data.frame(turnover = NA, nestedness = NA)
counter <- 1
for(i in unique(year)){
for(j in unique(plotID)){
out <- one_m_cover %>%
dplyr::filter(year == i, plotID == j) %>%
dplyr::select(-year, -site, -plotID) %>%
nestedbetajac()
bd[counter, 1] <- out[1] %>% unname
bd[counter, 2] <- out[2] %>% unname
counter <- counter+1
}
}
ten_m <- get_longform_cover(neon_div_object,
scale = "10m",
fix_unks = fix_unks) %>%
dplyr::group_by(site, plotID, subplotID,taxonID, year) %>%
dplyr::summarise(cover = sum(cover, na.rm = TRUE)) %>%
dplyr::ungroup() %>%
dplyr::group_by(site, plotID, subplotID, year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup() %>%
dplyr::select(-subplotID)
ten_m <- get_longform_cover(neon_div_object,
scale = "10m",
fix_unks = fix_unks) %>%
dplyr::group_by(site, plotID, subplotID,taxonID, year) %>%
dplyr::summarise(cover = sum(cover, na.rm = TRUE)) %>%
dplyr::ungroup() %>%
dplyr::group_by(site, plotID, subplotID, year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup() %>%
dplyr::select(-subplotID)
bd<- data.frame(turnover = NA, nestedness = NA)
counter <- 1
for(i in unique(ten_m$year)){
for(j in unique(ten_m$plotID)){
out <- one_m_cover %>%
dplyr::filter(year == i, plotID == j) %>%
dplyr::select(-year, -site, -plotID) %>%
nestedbetajac()
bd[counter, 1] <- out[1] %>% unname
bd[counter, 2] <- out[2] %>% unname
counter <- counter+1
}
}
bd<- data.frame(turnover = NA, nestedness = NA)
counter <- 1
for(i in unique(ten_m$year)){
for(j in unique(ten_m$plotID)){
out <- ten_m %>%
dplyr::filter(year == i, plotID == j) %>%
dplyr::select(-year, -site, -plotID) %>%
nestedbetajac()
bd[counter, 1] <- out[1] %>% unname
bd[counter, 2] <- out[2] %>% unname
counter <- counter+1
}
}
i
j
out <- ten_m %>%
dplyr::filter(year == i, plotID == j) %>%
dplyr::select(-year, -site, -plotID) %>%
nestedbetajac()
ten_m %>%
dplyr::filter(year == i, plotID == j)
bd<- data.frame(turnover = NA, nestedness = NA)
counter <- 1
for(i in unique(ten_m$year)){
for(j in unique(ten_m$plotID)){
if(nrow(ten_m %>%
dplyr::filter(year == i, plotID == j))>0){
out <- ten_m %>%
dplyr::filter(year == i, plotID == j) %>%
dplyr::select(-year, -site, -plotID) %>%
nestedbetajac()
bd[counter, 1] <- out[1] %>% unname
bd[counter, 2] <- out[2] %>% unname
counter <- counter+1}
}
}
bd
plot_scale <- get_longform_cover(neon_div_object,
scale = "plot",
fix_unks = fix_unks) %>%
dplyr::group_by(site, plotID,taxonID, year) %>%
dplyr::summarise(cover = sum(cover, na.rm = TRUE)) %>%
dplyr::ungroup() %>%
dplyr::group_by(site, plotID, year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup() %>%
dplyr::select(-plotID)
plot_scale
plot_scale <- get_longform_cover(neon_div_object,
scale = "plot",
fix_unks = fix_unks) %>%
dplyr::group_by(site, plotID,taxonID, year) %>%
dplyr::summarise(cover = sum(cover, na.rm = TRUE)) %>%
dplyr::ungroup() %>%
dplyr::group_by(site, plotID, year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup() %>%
dplyr::select(-plotID)
bd<- data.frame(turnover = NA, nestedness = NA)
counter <- 1
for(i in unique(ten_m$year)){
for(j in unique(ten_m$site)){
if(nrow(ten_m %>%
dplyr::filter(year == i, site == j))>0){
out <- ten_m %>%
dplyr::filter(year == i, site == j) %>%
dplyr::select(-year, -site) %>%
nestedbetajac()
bd[counter, 1] <- out[1] %>% unname
bd[counter, 2] <- out[2] %>% unname
counter <- counter+1}
}
}
plot_scale <- get_longform_cover(neon_div_object,
scale = "plot",
fix_unks = fix_unks) %>%
dplyr::group_by(site, plotID,taxonID, year) %>%
dplyr::summarise(cover = sum(cover, na.rm = TRUE)) %>%
dplyr::ungroup() %>%
dplyr::group_by(site, plotID, year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup() %>%
dplyr::select(-plotID)
bd<- data.frame(turnover = NA, nestedness = NA)
counter <- 1
for(i in unique(plot_scale$year)){
for(j in unique(plot_scale$site)){
if(nrow(plot_scale %>%
dplyr::filter(year == i, site == j))>0){
out <- plot_scale %>%
dplyr::filter(year == i, site == j) %>%
dplyr::select(-year, -site) %>%
nestedbetajac()
bd[counter, 1] <- out[1] %>% unname
bd[counter, 2] <- out[2] %>% unname
counter <- counter+1}
}
}
bd
ten_m <- get_longform_cover(neon_div_object,
scale = "10m",
fix_unks = fix_unks) %>%
dplyr::group_by(site, plotID, subplotID,taxonID, year) %>%
dplyr::summarise(cover = sum(cover, na.rm = TRUE)) %>%
dplyr::ungroup() %>%
dplyr::group_by(site, plotID, subplotID, year) %>%
tidyr::spread(taxonID, cover, fill=0) %>%
dplyr::ungroup() %>%
dplyr::select(-subplotID)
bd<- data.frame(turnover = NA, nestedness = NA, year = NA, plotID = NA, site = NA)
counter <- 1
for(i in unique(ten_m$year)){
for(j in unique(ten_m$plotID)){
if(nrow(ten_m %>%
dplyr::filter(year == i, plotID == j))>0){
out <- ten_m %>%
dplyr::filter(year == i, plotID == j) %>%
dplyr::select(-year, -site, -plotID) %>%
nestedbetajac()
bd[counter, 1] <- out[1] %>% unname
bd[counter, 2] <- out[2] %>% unname
bd[counter, 3] <- i
bd[counter, 4] <- j
bd[counter, 5] <- str_sub(j, 1,4)
counter <- counter+1}
}
}
bd
scale = "plot"
full_on_cover <- get_longform_cover(neon_div_object,
scale = scale,
fix_unks = fix_unks)
full_on_cover
scale = "site"
full_on_cover <- get_longform_cover(neon_div_object,
scale = scale,
fix_unks = fix_unks)
full_on_cover
devtools::document()
devtools::install()
x <- download_plant_div("SRER")
x
devtools::document()
devtools::install()
devtools::install_github("admahood/neondiveRsity")
library(neondiveRsity)
x<-download_plant_div("JORN")
get_diversity_info(x, scale = "site", betadiversity = TRUE)
devtools::document()
devtools::install()
devtools::install_github("admahood/neondiveRsity")
get_diversity_info(x, scale = "site", betadiversity = TRUE)
x<-download_plant_div("JORN")
devtools::install_github("admahood/neondiveRsity")
library(neondiveRsity)
x<-download_plant_div("JORN")
get_diversity_info(x, scale = "site", betadiversity = TRUE)
exists(x)
?exists
exists("x")
devtools::document()
devtools::install()
get_diversity_info(x, scale = "site", betadiversity = TRUE)
