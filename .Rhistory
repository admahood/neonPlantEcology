filter(!name %in% c("nspp_notexotic", "nspp_total")) %>%
transmute(origin = str_remove_all(name, "nspp_"),
nspp = value,
site=site)
ggplot(dj, aes(x=nspp, y=site, fill = origin)) +
geom_bar(stat = "identity")
di <- npe_diversity_info(D14, scale = "site", timescale = "all", betadiversity = TRUE)
di %>%
dplyr::select(site, eventID, starts_with("shannon"), turnover, nestedness) %>%
pivot_longer(cols = starts_with("shannon"))
dk <- di %>%
dplyr::select(site, eventID, starts_with("shannon"), turnover, nestedness) %>%
pivot_longer(cols = starts_with("shannon"), names_to = "origin", values_to = "shannon") %>%
pivot_longer(cols = c(turnover, nestedness), names_to = "bd_type", values_to = "bd_value")
dk
dk <- di %>%
dplyr::select(site, eventID, shannon_total, turnover, nestedness) %>%
pivot_longer(cols = c(shannon_total,turnover, nestedness), names_to = "div_type", values_to = "div_value")
dk
ggplot(dk, aes(x = div_value, y = site, fill = div_type)) +
geom_bar()
ggplot(dk, aes(x = div_value, y = site, fill = div_type)) +
geom_bar(stat = 'identity')
ggplot(dk, aes(x = div_value, y = site, fill = div_type)) +
geom_bar(stat = 'identity', position = "dodge")
?vegan::betadiver
?vegan::nestedbetajac
cm <- npe_community_matrix(D14)
vegan::betadiver(cm)
di %>% glimpse()
di %>%
dplyr::select(site, eventID, starts_with("rel_cover")) %>%
pivot_longer(cols = starts_with("rel_cover")) %>%
filter(!name %in% c("rel_cover_notexotic", "rel_cover_total")) %>%
transmute(origin = str_remove_all(name, "rel_cover_"),
relative_cover = value,
site=site)
ggplot(dj, aes(x=relative_cover, y=site, fill = origin)) +
geom_bar(stat = "identity")
dk<- di %>%
dplyr::select(site, eventID, starts_with("rel_cover")) %>%
pivot_longer(cols = starts_with("rel_cover")) %>%
filter(!name %in% c("rel_cover_notexotic", "rel_cover_total")) %>%
transmute(origin = str_remove_all(name, "rel_cover_"),
relative_cover = value,
site=site)
ggplot(dk, aes(x=relative_cover, y=site, fill = origin)) +
geom_bar(stat = "identity")
dl <- di%>%
dplyr::select(site, eventID, starts_with("shannon")) %>%
pivot_longer(cols = starts_with("shannon")) %>%
filter(!name %in% c("shannon_notexotic", "shannon_total")) %>%
transmute(origin = str_remove_all(name, "shannon"),
shannon = value,
site=site)
ggplot(dl, aes(x = shannon, y = site, fill = origin)) +
geom_bar(stat = 'identity')
dl <- di%>%
dplyr::select(site, eventID, starts_with("shannon")) %>%
pivot_longer(cols = starts_with("shannon")) %>%
filter(!name %in% c("shannon_notexotic", "shannon_total", "shannon_family")) %>%
transmute(origin = str_remove_all(name, "shannon_"),
shannon = value,
site=site)
ggplot(dl, aes(x = shannon, y = site, fill = origin)) +
geom_bar(stat = 'identity')
ggplot(dl, aes(x = shannon, y = site, fill = origin)) +
geom_bar(stat = 'identity') +
xlab("Shannon-Weaver Diveristy")
ddl <- npe_longform(D14)
ddl
glimpse(ddl)
lf <- npe_longform(D14)
lf <- npe_longform(D14, scale = "site", timescale = "annual")
lf_f <- lf %>%
group_by(site, family) %>%
summarise(cover = mean(cover, na.rm=T)) %>%
ungroup() %>%
ggplot(aes(x=eventID, y=cover, color = family)) +
geom_line() +
facet_wrap(~site)
lf_f <- lf %>%
group_by(site, family) %>%
summarise(cover = mean(cover, na.rm=T)) %>%
ungroup()
ggplot(lf_f, aes(x=eventID, y=cover, color = family)) +
geom_line() +
facet_wrap(~site)
lf_f <- lf %>%
group_by(site, eventID, family) %>%
summarise(cover = mean(cover, na.rm=T)) %>%
ungroup()
ggplot(lf_f, aes(x=eventID, y=cover, color = family)) +
geom_line() +
facet_wrap(~site)
ggplot(lf_f, aes(x=eventID, y=cover, color = family)) +
geom_line() +
facet_wrap(~site) +
theme(legend.position = "none")
ggplot(lf_f, aes(x=eventID, y=cover, group = family)) +
geom_line() +
facet_wrap(~site) +
theme(legend.position = "none")
lf_f <- lf %>%
mutate(family = ifelse(!family %in% c("Poaceae", "Fabaceae"), "Other", family)) %>%
group_by(site, eventID, family) %>%
summarise(cover = mean(cover, na.rm=T)) %>%
ungroup()
ggplot(lf_f, aes(x=eventID, y=cover, color = family)) +
geom_line() +
facet_wrap(~site) +
theme(legend.position = "none")
lf_f
lf_f <- lf %>%
mutate(family = ifelse(!family %in% c("Poaceae", "Fabaceae"), "Other", family)) %>%
group_by(site, eventID, family) %>%
summarise(cover = sum(cover, na.rm=T)) %>%
ungroup()
ggplot(lf_f, aes(x=eventID, y=cover, color = family)) +
geom_line() +
facet_wrap(~site) +
theme(legend.position = "none")
lf_f
lf_f <- lf %>%
mutate(family = ifelse(!family %in% c("Poaceae", "Fabaceae"), "Other", family),
eventID = as.numeric(eventID)) %>%
group_by(site, eventID, family) %>%
summarise(cover = sum(cover, na.rm=T)) %>%
ungroup()
ggplot(lf_f, aes(x=eventID, y=cover, color = family)) +
geom_line() +
facet_wrap(~site) +
theme(legend.position = "none")
ggplot(lf_f, aes(x=eventID, y=cover, color = family)) +
geom_line() +
facet_wrap(~site, scales = "free") +
theme(legend.position = "none")
lf_f <- lf %>%
mutate(family = ifelse(!family %in% c("Poaceae", "Fabaceae"), "Other", family),
eventID = as.numeric(eventID)) %>%
group_by(site, eventID, family) %>%
summarise(cover = mean(cover, na.rm=T)) %>%
ungroup()
ggplot(lf_f, aes(x=eventID, y=cover, color = family)) +
geom_line() +
facet_wrap(~site, scales = "free") +
theme(legend.position = "none")
lf_f <- lf %>%
mutate(family = ifelse(!family %in% c("Poaceae", "Fabaceae"), "Other", family),
eventID = as.numeric(eventID)) %>%
group_by(site, eventID, family) %>%
summarise(cover = sum(cover, na.rm=T)) %>%
ungroup()
ggplot(lf_f, aes(x=eventID, y=cover, color = family)) +
geom_line() +
facet_wrap(~site, scales = "free") +
theme(legend.position = "none")
lf <- npe_longform(D14, scale = "plot", timescale = "annual")
lf_f <- lf %>%
mutate(family = ifelse(!family %in% c("Poaceae", "Fabaceae"), "Other", family),
eventID = as.numeric(eventID)) %>%
group_by(site, plotID, eventID, family) %>%
summarise(cover = sum(cover, na.rm=T)) %>%
ungroup()
ggplot(lf_f, aes(x=eventID, y=cover, color = family, group=plotID)) +
geom_line() +
facet_wrap(~site, scales = "free") +
theme(legend.position = "none")
lf_f
ggplot(lf_f, aes(x=eventID, y=cover, color = family, group=plotID)) +
geom_line() +
facet_wrap(~site, scales = "free") +
theme(legend.position = "none")
ggplot(lf_f, aes(x=eventID, y=cover, color = family, group=plotID)) +
geom_line() +
facet_wrap(~site, scales = "free")
ggplot(lf_f, aes(x=eventID, y=cover, color = family)) +
geom_line() +
facet_wrap(~site, scales = "free")
ggplot(lf_f, aes(x=eventID, y=cover, color = family, group=plotID)) +
geom_line() +
facet_wrap(~site, scales = "free")
lf_f
lf_f <- lf %>%
mutate(family = ifelse(!family %in% c("Poaceae", "Fabaceae"), "Other", family)) %>%
group_by(site, plotID, eventID, family) %>%
summarise(cover = sum(cover, na.rm=T)) %>%
ungroup()
ggplot(lf_f, aes(x=eventID, y=cover, color = family, group=plotID)) +
geom_line() +
facet_wrap(~site, scales = "free")
lf_f <- lf %>%
mutate(family = ifelse(!family %in% c("Poaceae", "Fabaceae"), "Other", family)) %>%
group_by(site, plotID, eventID, family) %>%
summarise(cover = mean(cover, na.rm=T)) %>%
ungroup()
ggplot(lf_f, aes(x=eventID, y=cover, color = family, group=plotID)) +
geom_line() +
facet_wrap(~site, scales = "free")
lf_f <- lf %>%
mutate(family = ifelse(!family %in% c("Poaceae", "Fabaceae"), "Other", family)) %>%
group_by(site, plotID, eventID, family) %>%
summarise(cover = sum(cover, na.rm=T)) %>%
ungroup()
ggplot(lf_f, aes(x=eventID, y=cover, color = family, group=plotID)) +
geom_line() +
facet_wrap(~site, scales = "free")
ggplot(lf_f, aes(x=eventID, y=cover, color = family, group=plotID)) +
geom_line() +
facet_wrap(~plotID, scales = "free")
ggplot(lf_f, aes(x=eventID, y=cover, color = family, group=plotID)) +
geom_line() +
facet_wrap(~site, scales = "free")
ggplot(lf_f, aes(x=eventID, y=cover, color = family, group=plotID)) +
geom_path() +
facet_wrap(~site, scales = "free")
ggplot(lf_f, aes(x=eventID, y=cover, color = family, color=plotID)) +
geom_line() +
facet_wrap(~site, scales = "free")
ggplot(lf_f, aes(x=eventID, y=cover, color = family, group=plotID)) +
geom_line() +
facet_wrap(~site, scales = "free")
ggplot(lf_f, aes(x=eventID, y=cover, color = family)) +
geom_line(aes(group=plotID)) +
facet_wrap(~site, scales = "free")
lf_f
lf_f <- lf %>%
mutate(family = ifelse(!family %in% c("Poaceae", "Fabaceae"), "Other", family),
eventID = as.numeric(eventID)) %>%
group_by(site, plotID, eventID, family) %>%
summarise(cover = sum(cover, na.rm=T)) %>%
ungroup()
ggplot(lf_f, aes(x=eventID, y=cover, color = family)) +
geom_line(aes(group=plotID)) +
facet_wrap(~site, scales = "free")
ggplot(lf_f, aes(x=eventID, y=cover, color = family)) +
geom_boxplot(position="dodge") +
facet_wrap(~site, scales = "free")
lf_f <- lf %>%
mutate(family = ifelse(!family %in% c("Poaceae", "Fabaceae"), "Other", family)) %>%
group_by(site, plotID, eventID, family) %>%
summarise(cover = sum(cover, na.rm=T)) %>%
ungroup()
ggplot(lf_f, aes(x=eventID, y=cover, fill = family)) +
geom_boxplot(position="dodge") +
facet_wrap(~site, scales = "free")
di <- npe_diversity_info(D14, scale = "site", timescale = "all", betadiversity = TRUE)
dj<- di %>%
dplyr::select(site, eventID, starts_with("nspp")) %>%
pivot_longer(cols = starts_with("nspp")) %>%
filter(!name %in% c("nspp_notexotic", "nspp_total")) %>%
transmute(origin = str_remove_all(name, "nspp_"),
nspp = value,
site=site)
ggplot(dj, aes(x=nspp, y=site, fill = origin)) +
geom_bar(stat = "identity")
lf <- npe_longform(D14, scale = "plot", timescale = "annual")
lf_f <- lf %>%
mutate(family = ifelse(!family %in% c("Poaceae", "Fabaceae"), "Other", family)) %>%
group_by(site, plotID, eventID, family) %>%
summarise(cover = sum(cover, na.rm=T)) %>%
ungroup()
ggplot(lf_f, aes(x=eventID, y=cover, fill = family)) +
geom_boxplot(position="dodge") +
facet_wrap(~site, scales = "free")
p1<-ggplot(dj, aes(x=nspp, y=site, fill = origin)) +
geom_bar(stat = "identity")
p2<- ggplot(dk, aes(x=relative_cover, y=site, fill = origin)) +
geom_bar(stat = "identity")
p3<- ggplot(dl, aes(x = shannon, y = site, fill = origin)) +
geom_bar(stat = 'identity') +
xlab("Shannon-Weaver Diveristy")
library(ggpubr)
ggpubr::ggarrange(p1, p2, p3)
ggpubr::ggarrange(p1, p2 + theme(axis.title.y = element.blank(),
axis.text.y = element_blank(),
axis.ticks.y = element_blank()),
p3 + theme(axis.title.y = element.blank(),
axis.text.y = element_blank(),
axis.ticks.y = element_blank()),
nrow=1, ncol=3, common.legend = TRUE)
ggpubr::ggarrange(p1, p2 + theme(axis.title.y = element_blank(),
axis.text.y = element_blank(),
axis.ticks.y = element_blank()),
p3 + theme(axis.title.y = element_blank(),
axis.text.y = element_blank(),
axis.ticks.y = element_blank()),
nrow=1, ncol=3, common.legend = TRUE)
ggpubr::ggarrange(p1, p2 + theme(axis.title.y = element_blank(),
axis.text.y = element_blank(),
axis.ticks.y = element_blank()),
p3 + theme(axis.title.y = element_blank(),
axis.text.y = element_blank(),
axis.ticks.y = element_blank()),
nrow=1, ncol=3, common.legend = TRUE, widths = c(1,1,1))
ggpubr::ggarrange(p1,
p2 + theme(axis.title.y = element_blank(),
axis.text.y = element_blank(),
axis.ticks.y = element_blank()),
p3 + theme(axis.title.y = element_blank(),
axis.text.y = element_blank(),
axis.ticks.y = element_blank()),
nrow=1, ncol=3, common.legend = TRUE, widths = c(1.5,1,1))
ggpubr::ggarrange(p1,
p2 + theme(axis.title.y = element_blank(),
axis.text.y = element_blank(),
axis.ticks.y = element_blank()),
p3 + theme(axis.title.y = element_blank(),
axis.text.y = element_blank(),
axis.ticks.y = element_blank()),
nrow=1, ncol=3, common.legend = TRUE, widths = c(1.35,1,1))
p1<-ggplot(dj, aes(x=nspp, y=site, fill = origin)) +
geom_bar(stat = "identity") +
xlab("Species Richness")
p2<- ggplot(dk, aes(x=relative_cover, y=site, fill = origin)) +
geom_bar(stat = "identity") +
xlab("Relative Cover")
p1<-ggplot(dj, aes(x=nspp, y=site, fill = origin)) +
geom_bar(stat = "identity") +
xlab("Species Richness") +
ylab("Site")
p2<- ggplot(dk, aes(x=relative_cover, y=site, fill = origin)) +
geom_bar(stat = "identity") +
xlab("Relative Cover")
p3<- ggplot(dl, aes(x = shannon, y = site, fill = origin)) +
geom_bar(stat = 'identity') +
xlab("Shannon-Weaver Diveristy")
ggpubr::ggarrange(p1,
p2 + theme(axis.title.y = element_blank(),
axis.text.y = element_blank(),
axis.ticks.y = element_blank()),
p3 + theme(axis.title.y = element_blank(),
axis.text.y = element_blank(),
axis.ticks.y = element_blank()),
nrow=1, ncol=3,
common.legend = TRUE,
widths = c(1.35,1,1))
document()
install(build_vignettes = TRUE)
p1<-ggplot(dj, aes(x=nspp, y=site, fill = origin)) +
geom_bar(stat = "identity", color = "black", lwd = .2) +
xlab("Species Richness") +
ylab("Site")
p2<- ggplot(dk, aes(x=relative_cover, y=site, fill = origin)) +
geom_bar(stat = "identity", color = "black", lwd = .2) +
xlab("Relative Cover")
p3<- ggplot(dl, aes(x = shannon, y = site, fill = origin)) +
geom_bar(stat = 'identity', color = "black", lwd = .2) +
xlab("Shannon-Weaver Diveristy")
ggpubr::ggarrange(p1,
p2 + theme(axis.title.y = element_blank(),
axis.text.y = element_blank(),
axis.ticks.y = element_blank()),
p3 + theme(axis.title.y = element_blank(),
axis.text.y = element_blank(),
axis.ticks.y = element_blank()),
nrow=1, ncol=3,
common.legend = TRUE,
widths = c(1.35,1,1))
document();install(build_vignettes = TRUE)
ggplot(lf_f, aes(x=eventID, y=cover, fill = family)) +
geom_boxplot(position="dodge") +
facet_wrap(~site, scales = "free_x")
lapply(c(“neonPlanEcology”, “vegan”, “tidyverse”, “sf”),
lapply(list(“neonPlanEcology”, “vegan”, “tidyverse”, “sf”),
lapply(list(“neonPlanEcology”, “vegan”, “tidyverse”, “sf”),
lapply(list = c(“neonPlanEcology”, “vegan”, “tidyverse”, “sf”),
libs <- c(“neonPlanEcology”, “vegan”, “tidyverse”,"sf")
libs <- c(“neonPlanEcology”, “vegan”, “tidyverse”,"sf")
c(“neonPlantEcology”, “vegan”, “tidyverse”,"sf")
sapply(c("neonPlantEcology", "vegan", "tidyverse", "sf"), library, character.only=T)
library(devtools)
load_all()
check()
install.packages("tidyverse")
check()\
check()
build_vignettes()
document()
build()
install()
load_all()
npe_download_plant_div() ->d
npe_community_matrix(d)
library(tidyverse)
npe_community_matrix(d)
npe_longform(d)
npe_diversity_info(d)
library(devtools)
build()
install()
load_all()
D14
npe_diversity_info(D14, scale = "site", timescale = "all")
library(tidyverse)
npe_diversity_info(D14, scale = "site", timescale = "all")
load_all()
library(devtools)
document()
document()
rlang::last_trace()
document()
load_all()
document()
load_all()
load_all()
load_all()
document()
check()
build()
data("D14")
npe_diversity_info(D14, timescale = "all")
rlang::last_trace()
rlang::last_trace(drop = FALSE)
npe_diversity_info(D14, timescale = "all")
load_all()
npe_diversity_info(D14, timescale = "all")
?|>
? |>
?`|>`
document()
build()
library(tidyverse)
library(neonPlantEcology)
library(vegan)
library(sf)
library(ggpubr)
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>"
)
options(rmarkdown.html_vignette.check_title = FALSE)
# D14 <- npe_site_ids(domain = "D14") %>%
#   npe_download_plant_div(sites = .)
data("D14")
comm <- npe_community_matrix(D14)
comm[1:4, 1:4]
data("plot_centroids")
plot_centroids <- st_set_geometry(plot_centroids, NULL)
metadata <- npe_plot_info(comm) %>%
left_join(plot_centroids)
library(vegan)
# checking the metadata file to see where JORN stops and SRER begins
which(metadata$site == "JORN") %>% range()
which(metadata$site == "SRER") %>% range()
# performing and plotting the species accumulation curve analysis
sp_jorn <- vegan::specaccum(comm[1:152,])
sp_srer <- vegan::specaccum(comm[152:347,])
plot(sp_srer, col = "blue")
plot(sp_jorn, col = "gold", add=T)
nmds <- metaMDS(comm,trace = F)
nmds_sites <- nmds$points %>%
as_tibble(rownames = "rowname") %>%
left_join(metadata)
ggplot(nmds_sites, aes(x=MDS1, y=MDS2, color = eventID, size = elevation, shape = site)) +
geom_point() +
theme_classic() +
scale_color_brewer(palette = "Set1") +
theme(panel.background = element_rect(fill=NA, color= "black"))
di <- npe_diversity_info(D14, scale = "site", timescale = "all")
dj<- di %>%
dplyr::select(site, eventID, starts_with("nspp")) %>%
pivot_longer(cols = starts_with("nspp")) %>%
filter(!name %in% c("nspp_notexotic", "nspp_total")) %>%
transmute(origin = str_remove_all(name, "nspp_"),
nspp = value,
site=site)
p1<-ggplot(dj, aes(x=nspp, y=site, fill = origin)) +
geom_bar(stat = "identity", color = "black", lwd = .2) +
xlab("Species Richness") +
ylab("Site")
dk<- di %>%
dplyr::select(site, eventID, starts_with("rel_cover")) %>%
pivot_longer(cols = starts_with("rel_cover")) %>%
filter(!name %in% c("rel_cover_notexotic", "rel_cover_total")) %>%
transmute(origin = str_remove_all(name, "rel_cover_"),
relative_cover = value,
site=site)
di
glimpse(di)
document()
?str_c
document()
build()
install()
update.packages(ask =F)
str_remove_all("asdfased_123", "\\_\\d{3}")
load_all()
moab <- download_plant_div("MOAB")
moab <- npe_download_plant_div("MOAB")
npe_diversity_info(moab, timescale = "all")
npe_diversity_info(moab, timescale = "annual")
npe_diversity_info(moab, timescale = "subannual")
npe_site_ids()
npe_site_ids() %>% unique()
document()
build()
install()
load_all
load_all()
npe_download_plant_div("ONAQ")
npe_download_plant_div("ONAQ") -> test
install_github("admahood/neonPlantEcology")
detach("neonPlantEcology")
library(neonPlantEcology)
detach("package:neonPlantEcology", unload = TRUE)
install_github("admahood/neonPlantEcology")
test
npe_diversity_info(test)
library(neonPlantEcology)
npe_diversity_info(test)
npe_diversity_info(test, timescale = "all")
